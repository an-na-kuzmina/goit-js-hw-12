{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst API_KEY = '45094869-2592a7d622688fe6b4ce663f6';\n\nexport default async function searchImagesByUserQuery(\n  searchQuery,\n  page = 1,\n  perPage = 15\n) {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: API_KEY,\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    throw new Error(error.response ? error.response.data : error.message);\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function renderImages(data) {\n  const galleryList = document.querySelector('.list');\n  const lightbox = new SimpleLightbox('.card a', {\n    inlineStyles: false,\n    captionsData: 'alt',\n    captionDelay: 250,\n    disableScroll: true,\n  });\n\n  const markup = data.hits\n    .map(\n      hit => `\n    <li class=\"card\">\n      <a class=\"card-link\" href=\"${hit.largeImageURL}\">\n        <img class=\"card-image\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" />\n      </a>\n      <div class=\"info-text\">\n        <ul class=\"card-list\">\n          <li class=\"card-list-li\">\n            <h3>likes</h3>\n            <p>${hit.likes}</p>\n          </li>\n          <li class=\"card-list-li\">\n            <h3>views</h3>\n            <p>${hit.views}</p>\n          </li>\n          <li class=\"card-list-li\">\n            <h3>comments</h3>\n            <p>${hit.comments}</p>\n          </li>\n          <li class=\"card-list-li\">\n            <h3>downloads</h3>\n            <p>${hit.downloads}</p>\n          </li>\n        </ul>\n      </div>\n    </li>\n  `\n    )\n    .join('');\n  galleryList.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n}\n\nexport function showError(error) {\n  iziToast.error({\n    title: '❌',\n    messageColor: 'white',\n    backgroundColor: '#E25757',\n    position: 'topRight',\n    message: `${error}`,\n  });\n}\n\nexport function cleanGallery() {\n  const list = document.querySelector('.list');\n  list.innerHTML = '';\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport searchImagesByUserQuery from './js/pixabay-api.js';\nimport {\n  renderImages,\n  cleanGallery,\n  showError,\n} from './js/render-functions.js';\n\nconst form = document.querySelector('#search-form');\nconst input = document.querySelector('#search-input');\nconst loader = document.querySelector('#loader');\n\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet page = 1;\nlet perPage = 15;\nlet searchQuery = '';\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  cleanGallery();\n  loader.classList.remove('hidden');\n  searchQuery = input.value.trim();\n  page = 1;\n  loadMoreBtn.classList.add('hidden');\n  await performSearch();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  page++;\n  await performSearch();\n});\n\nasync function performSearch() {\n  loader.classList.add('hidden');\n  if (searchQuery === '') {\n    showError('Please enter a search query.');\n\n    return;\n  }\n\n  try {\n    const data = await searchImagesByUserQuery(searchQuery, page, perPage);\n\n    if (data.total === 0) {\n      showError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    } else {\n      if (page > 1) {\n        renderImages(data);\n        const galleryHeight = document\n          .querySelector('.list')\n          .getBoundingClientRect().height;\n\n        window.scrollBy({\n          top: galleryHeight * 2,\n          behavior: 'smooth',\n        });\n      } else {\n        renderImages(data);\n      }\n      if (data.hits.length < perPage) {\n        loadMoreBtn.classList.add('hidden');\n        return iziToast.info({\n          position: 'topRight',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      } else {\n        if (data.totalHits > page * perPage) {\n          loadMoreBtn.classList.remove('hidden');\n        } else {\n          loadMoreBtn.classList.add('hidden');\n          return iziToast.info({\n            position: 'topRight',\n            message:\n              \"We're sorry, but you've reached the end of search results.\",\n          });\n        }\n      }\n    }\n  } catch (error) {\n    showError(error.message);\n    loader.classList.add('hidden');\n  } finally {\n    input.value = '';\n  }\n}\n"],"names":["API_KEY","searchImagesByUserQuery","searchQuery","page","perPage","axios","error","renderImages","data","galleryList","lightbox","SimpleLightbox","markup","hit","showError","iziToast","cleanGallery","list","form","input","loader","loadMoreBtn","event","performSearch","galleryHeight"],"mappings":"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"}